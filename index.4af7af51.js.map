{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,oDAKMC,GADgBC,SAASC,cAAc,sBAC/BD,SAASC,cAAc,iBAC/BC,EAASF,SAASC,cAAc,WAChCE,EAAUH,SAASC,cAAc,gBAEjCG,EAAkBJ,SAASC,cAAc,oBACzCI,EAAgBL,SAASC,cAAc,kBAI7C,SAASK,EAAWC,GAClBC,QAAQC,IAAI,SAEPF,EAAMG,OAAOC,QAAQ,kBACtBJ,EAAMG,OAAOC,QAAQ,uBACpBJ,EAAMK,UACS,KAAlBL,EAAMK,UASRb,EAAMc,UAAUC,IAAI,aACpBd,SAASe,KAAKC,MAAMC,SAAW,UAC/Bd,EAAQe,UAAiB,yQAMzBnB,EAAMoB,gBAAgB,MAdpBnB,SAASoB,oBAAoB,UAAWd,GACxCP,EAAMqB,oBAAoB,QAASd,G,UAkCxBe,I,OAAAA,EAAfC,EAAAzB,EAAA,CAAAyB,EAAAC,GAAAC,MAAA,SAAAC,EAAgCC,G,IAGtBC,EACEC,EAGFC,E,mFALN,EAAAC,EAAAC,gB,SACuBC,EAAAC,WAAWC,cAAcR,G,OAA1CC,EAAQQ,EAAAC,KACRR,EAAWD,EAATC,KACRpB,QAAQC,IAAImB,GAENC,EAASQ,EAAkBT,GACjCzB,EAAQmC,mBAAmB,YAAaT,G,yDAExCrB,QAAQC,IAAG0B,EAAAI,I,kBACJC,EAAAC,OAAOC,QAAQ,kD,0BAEtB,EAAAZ,EAAAa,e,8EAb2BC,MAAAC,KAAAC,U,CAiB/B,SAAST,EAAkBT,GAEzB,IAEOmB,EAAkGnB,EAAlGmB,OAAQC,EAA0FpB,EAA1FoB,YAAaC,EAA6ErB,EAA7EqB,MAAOC,EAAsEtB,EAAtEsB,aAAcxB,EAAwDE,EAAxDF,GAAIyB,EAAoDvB,EAApDuB,WAAYC,EAAwCxB,EAAxCwB,WAAYC,EAA4BzB,EAA5ByB,eAAgBC,EAAY1B,EAAZ0B,SAEvFC,EAAa,mCAA+CC,OAAZR,GAChDS,EAAaV,EAAOW,KAAI,SAAAC,G,OAASA,EAAMC,I,IACvCC,EAAcJ,EAAWK,OAAS,EAAI,CAACL,EAAW,GAAIA,EAAW,GAAI,SAASM,KAAK,MAAQN,EAAWM,KAAK,MAC3GC,EAAcd,EAAae,QAAQ,GACnCC,EAAQd,EAAWa,QAAQ,GAEjC,MAAO,6UAQGT,OADoCD,EAAW,gBACDC,OAA9CP,EAAM,2CAIqBO,OAtBf,0HAkB+C,+EASJA,OAL5BP,EAAM,gSAO4BO,OAFNQ,EAAY,8JAOzBR,OALmBL,EAAW,sNAS9BK,OAJAU,EAAM,uMAQNV,OAJAH,EAAe,8LAW3DG,OAP4CK,EAAY,4LAW4BL,OAJpFF,EAAS,iKAOuEE,OAHI9B,EAAG,wIAGJ8B,OAAH9B,EAAG,yE,CAzH7FxB,EAAOiE,iBAAiB,SA4BxB,SAAmB5D,GACjB,IAAM6D,EAAa7D,EAAMG,OAAOC,QAAQ,iBACpCyD,IACFrE,EAAMsE,aAAa,KAAMD,EAAW1C,IACpCtB,EAAgBiE,aAAa,UAAWD,EAAW1C,IACnDrB,EAAcgE,aAAa,UAAWD,EAAW1C,IAKlCA,EAJL0C,EAAW1C,GAKvB3B,EAAMc,UAAUyD,OAAO,aACvBtE,SAASe,KAAKC,MAAMC,SAAW,S,SAMDS,GAAjBL,EAAgBuB,MAAAC,KAAAC,U,CAL7ByB,CAAiB7C,GACjB3B,EAAMoE,iBAAiB,QAAS7D,GAChCN,SAASmE,iBAAiB,UAAW7D,IALvC,IAAmBoB,C","sources":["src/js/modal.js"],"sourcesContent":["import { ApiService } from './ApiServise';\nimport { Notify } from 'notiflix';\nimport { spinnerStart, spinnerStop } from './spinner';\n\nconst closeModalBtn = document.querySelector('[data-modal-close]');\nconst modal = document.querySelector('[data-modal]');\nconst movies = document.querySelector('.movies');\nconst wrapper = document.querySelector('.movie-modal');\n\nconst btnAddToWatched = document.querySelector('.btn_add_watched');\nconst btnAddToQueue = document.querySelector('.btn_add_queue');\n\nmovies.addEventListener('click', clickList);\n\nfunction clickModal(event) {\n  console.log('test');\n  if (\n    ((!event.target.closest('.movie-modal') ||\n      event.target.closest('[data-modal-close]')) &&\n      !event.keyCode) ||\n    event.keyCode === 27\n  ) {\n    closeModal();\n    document.removeEventListener('keydown', clickModal);\n    modal.removeEventListener('click', clickModal);\n  }\n}\n\nfunction closeModal() {\n  modal.classList.add('is-hidden');\n  document.body.style.overflow = 'visible';\n  wrapper.innerHTML =     `<div class=\"player\"></div>\n  <button data-modal-close class=\"movie-modal__close-btn\" type=\"button\">\n    <svg class=\"movie-modal__close-btn-icon\" width=\"30\" height=\"30\">\n      <use href=\"./images/symbol.svg#icon-close-btn-modal\"></use>\n    </svg>\n  </button>`;\n  modal.removeAttribute(\"id\")\n}\n\nfunction clickList(event) {\n  const moviesCard = event.target.closest('.movies__item');\n  if (moviesCard) {\n    modal.setAttribute('id', moviesCard.id);\n    btnAddToWatched.setAttribute('data-id', moviesCard.id);\n    btnAddToQueue.setAttribute('data-id', moviesCard.id);\n    openModal(moviesCard.id);\n  }\n}\n\nfunction openModal(id) {\n  modal.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  fetchModalMarkup(id);\n  modal.addEventListener('click', clickModal);\n  document.addEventListener('keydown', clickModal);\n}\n\nasync function fetchModalMarkup(id) {\n  try {\n    spinnerStart();\n    const response = await ApiService.getMoviesById(id);\n    const { data } = response;\n    console.log(data);\n\n    const markUp = createModalMarkup(data);\n    wrapper.insertAdjacentHTML('beforeend', markUp);\n  } catch (error) {\n    console.log(error);\n    return Notify.failure('Something went wrong. Please try again later.');\n  } finally {\n    spinnerStop();\n  }\n}\n\nfunction createModalMarkup(data) {\n\n  const defaultImage = `https://raw.githubusercontent.com/yuriykosh/goit--team-project--js/main/src/images/main-home/poster-filler-desktop.jpeg`;\n\n  const {genres, poster_path, title, vote_average, id, vote_count, popularity, original_title, overview} = data;\n\n  const posterLink = `https://image.tmdb.org/t/p/w500/${poster_path}`;\n  const genresList = genres.map(genre => genre.name);\n  const genresItems = genresList.length > 2 ? [genresList[0], genresList[1], 'Other'].join(', ') : genresList.join(', ');\n  const voteAverage = vote_average.toFixed(1);\n  const popul = popularity.toFixed(1);\n\n  return `<div class=\"movie-modal__wrapper\">\n    <div class=\"movie-modal__imgBox\">\n    <button class=\"movie-modal__video-btn js-playBtn\">\n      <svg class=\"movie-modal__play-btn\" width=\"80\" height=\"80\">\n        <use href=\"./images/symbol.svg#icon-play\"></use>\n      </svg>\n    </button>\n    <img class=\"movie-modal__imgBox__img\" src=${posterLink}\n      alt=${title} onerror=\"this.onerror=null;this.src='${defaultImage}';\"/>\n  </div>\n  <div>\n    <div>\n      <h2 class=\"movie-modal__title\">${title}</h2>\n      <ul class=\"movie-modal__info\">\n        <li class=\"movie-modal__info__item\">\n          <p class=\"movie-modal__info__item__attribute\">Vote / Votes</p>\n          <p class=\"movie-modal__info__item__value\">\n            <span class=\"movie-modal__info__item__value__marker\">${voteAverage}</span><span\n              class=\"movie-modal__info__item__value-slash\">/</span>\n            <span class=\"movie-modal__info__item__value__marker--grey\">${vote_count}</span>\n          </p>\n        </li>\n        <li class=\"movie-modal__info__item\">\n          <p class=\"movie-modal__info__item__attribute\">Popularity</p>\n          <p class=\"movie-modal__info__item__value\">${popul}</p>\n        </li>\n        <li class=\"movie-modal__info__item\">\n          <p class=\"movie-modal__info__item__attribute\">Original Title</p>\n          <p class=\"movie-modal__info__item__value\">${original_title}</p>\n        </li>\n        <li class=\"movie-modal__info__item\">\n          <p class=\"movie-modal__info__item__attribute\">Genre</p>\n          <p class=\"movie-modal__info__item__value\">${genresItems}</p>\n        </li>\n      </ul>\n    </div>\n    <div class=\"movie-modal__about\">\n      <h3 class=\"movie-modal__about-title\">About</h3>\n      <p class=\"movie-modal__desc\">\n        ${overview}\n      </p>\n    </div>\n    <div class=\"movie-modal__button\">\n      <button id=\"add-to-watched\" class=\"movie-modal__button__item btn_add_watched\" data-id=${id}>\n        add to watched\n      </button>\n      <button id=\"add-to-queue\" class=\"movie-modal__button__item btn_add_queue\" data-id=${id}>\n        add to queue\n      </button>\n    </div>\n  </div>\n</div>`\n}"],"names":["$bpxeT","parcelRequire","$40873ecf3c18e122$var$modal","document","querySelector","$40873ecf3c18e122$var$movies","$40873ecf3c18e122$var$wrapper","$40873ecf3c18e122$var$btnAddToWatched","$40873ecf3c18e122$var$btnAddToQueue","$40873ecf3c18e122$var$clickModal","event","console","log","target","closest","keyCode","classList","add","body","style","overflow","innerHTML","removeAttribute","removeEventListener","$40873ecf3c18e122$var$_fetchModalMarkup","$parcel$interopDefault","$2TvXO","mark","_callee","id","response","data","markUp","$j1lrD","spinnerStart","$2nBDz","ApiService","getMoviesById","_ctx","sent","$40873ecf3c18e122$var$createModalMarkup","insertAdjacentHTML","t0","$6JpON","Notify","failure","spinnerStop","apply","this","arguments","genres","poster_path","title","vote_average","vote_count","popularity","original_title","overview","posterLink","concat","genresList","map","genre","name","genresItems","length","join","voteAverage","toFixed","popul","addEventListener","moviesCard","setAttribute","remove","$40873ecf3c18e122$var$fetchModalMarkup"],"version":3,"file":"index.4af7af51.js.map"}