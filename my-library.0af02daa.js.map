{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,sM,MCAzDC,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,qECO5FC,OAAOC,iBAAiB,SAAUC,EAAAC,UAClCC,EAAAC,QAAKC,QAAQL,iBAAiB,QAASM,GACvCH,EAAAC,QAAKG,OAAOP,iBAAiB,QAASM,GACtCH,EAAAC,QAAKI,SAASR,iBAAiB,QAASC,EAAAQ,YAExC,IAAIC,EAAc,GACdC,EAAY,GACZC,EAAa,EACbC,EAAa,EAKjB,SAASP,EAAQQ,GAcf,GAbAC,EAAAC,WAAWC,IAAI,YAAaC,GAC5Bf,EAAAC,QAAKe,gBAAgBC,UAAUC,IAAI,aACnCX,EAAcI,EAAMQ,OAAOC,QAAQC,KAEnCb,EAAYc,EAAArB,QAAoBsB,KAAKhB,GACjB,YAAhBA,GACFP,EAAAC,QAAKC,QAAQe,UAAUC,IAAI,aAC3BlB,EAAAC,QAAKG,OAAOa,UAAUO,OAAO,eAE7BxB,EAAAC,QAAKG,OAAOa,UAAUC,IAAI,aAC1BlB,EAAAC,QAAKC,QAAQe,UAAUO,OAAO,cAG5BhB,EAAU3B,OAAS,GAAI,CACzBmB,EAAAC,QAAKe,gBAAgBC,UAAUO,OAAO,aACtCZ,EAAAC,WAAWY,MAAMhB,GACjB,MAAMiB,EAAcd,EAAAC,WAAWc,iBAI/B,OAHAf,EAAAC,WAAWe,GAAG,YAAab,QAE3Bc,EAAYH,EAAalB,E,CAI3BsB,EAAetB,E,CAwBjB,SAASsB,EAAeC,GACtB,GAAoB,IAAhBA,EAAKlD,OAMP,YALEmB,EAAAC,QAAK+B,UAAUC,UAAY,4FAGbC,EAAA7C,gDAIpB,MAAM8C,GAAe,EAAAC,EAAAC,qBAAoBN,GACzC/B,EAAAC,QAAK+B,UAAUC,UAAYE,EAAaG,KAAK,G,CAG7C,SAAST,EAAYU,EAAYR,GAC/B,IAAIS,EAAa,GAEjB,IAAI,IAAI5D,EAAqB,IAAlB2D,EAAa,GAAU3D,EAAe,GAAb2D,GAC9B3D,IAAMmD,EAAKlD,OADoCD,GAAG,EAKtD4D,EAAWC,KAAKV,EAAKnD,IAEvBkD,EAAeU,E,CAGjB,SAASzB,EAASJ,GAEhBkB,EADoBlB,EAAM+B,KACDlC,E,EAjD3B,SAAmBmC,GASjB,GARA3C,EAAAC,QAAKe,gBAAgBC,UAAUC,IAAI,aACnClB,EAAAC,QAAKC,QAAQe,UAAUC,IAAI,aAC3BN,EAAAC,WAAWC,IAAI,YAAaC,GAC5BR,EAAcoC,EACdnC,EAAYc,EAAArB,QAAoBsB,KAAKhB,GACrCE,EAAcD,EAAgBA,EAAU3B,OAAd,EAC1B6B,EAAakC,KAAKC,KAAKpC,EAAW,IAE9BD,EAAU3B,OAAS,GAAI,CACzBmB,EAAAC,QAAKe,gBAAgBC,UAAUO,OAAO,aACtCZ,EAAAC,WAAWY,MAAMhB,GACjB,MAAMiB,EAAcd,EAAAC,WAAWc,iBAI/B,OAHAf,EAAAC,WAAWe,GAAG,YAAab,QAE3Bc,EAAYH,EAAalB,E,CAG3BsB,EAAetB,E,CA/CjBsC,CAAU,W","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-6161ec61505e5586.js","node_modules/@parcel/runtime-js/lib/runtime-c578acf25ab98737.js","src/js/watchedQueuedList.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"my-library.0af02daa.js\\\",\\\"32lSb\\\":\\\"empty-list.42b24b97.gif\\\",\\\"5UbS1\\\":\\\"index.28ddbefc.css\\\",\\\"b9auz\\\":\\\"index.ca5823cd.js\\\"}\"));","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"32lSb\")).toString();","import empty from '../images/empty-list.gif';\nimport { pagination } from './tuiPagination';\nimport { onScroll, onToTopBtn } from \"./scroll-to-top\";\nimport { createGalleryMarkup } from './markUp';\nimport localStorageService from './localStorage-service';\nimport refs from './refs';\n\nwindow.addEventListener('scroll', onScroll);\nrefs.watched.addEventListener('click', onClick);\nrefs.queued.addEventListener('click', onClick);\nrefs.toTopBtn.addEventListener('click', onToTopBtn);\n\nlet STORAGE_KEY = '';\nlet movieList = []; \nlet totalItems = 0;\nlet totalPages = 0;\n\n\nstartPage('WATCHED');\n\nfunction onClick(event) {\n  pagination.off('afterMove', loadMore);\n  refs.paginationBlock.classList.add('is-hidden')\n  STORAGE_KEY = event.target.dataset.name;\n\n  movieList = localStorageService.load(STORAGE_KEY); \n  if (STORAGE_KEY === 'WATCHED') {\n    refs.watched.classList.add('is-active');\n    refs.queued.classList.remove('is-active');\n  } else{\n    refs.queued.classList.add('is-active');\n    refs.watched.classList.remove('is-active');\n  }\n\n  if (movieList.length > 20) {\n    refs.paginationBlock.classList.remove('is-hidden');\n    pagination.reset(totalItems);\n    const currentPage = pagination.getCurrentPage();\n    pagination.on('afterMove', loadMore); \n\n    loadOnePage(currentPage, movieList)\n    return;\n  }\n\n  loadMoviesList(movieList);\n}\n\nfunction startPage(buttonKey) {\n  refs.paginationBlock.classList.add('is-hidden')\n  refs.watched.classList.add('is-active');\n  pagination.off('afterMove', loadMore);\n  STORAGE_KEY = buttonKey;\n  movieList = localStorageService.load(STORAGE_KEY); \n  totalItems = !movieList ? 0 : movieList.length;\n  totalPages = Math.ceil(totalItems/20);\n\n  if (movieList.length > 20) {\n    refs.paginationBlock.classList.remove('is-hidden');\n    pagination.reset(totalItems);\n    const currentPage = pagination.getCurrentPage();\n    pagination.on('afterMove', loadMore); \n\n    loadOnePage(currentPage, movieList)\n    return;\n  }\n  loadMoviesList(movieList);\n}\n\nfunction loadMoviesList(list) {\n  if (list.length === 0) {\n      refs.movieList.innerHTML = `\n      <li>\n        <p class=\"empty__notify\">where is everyone?</p>\n        <img src=\"${empty}\" alt=\"The list is empty.\" />\n      </li>`;\n    return;\n  }\nconst galeryMarkUp = createGalleryMarkup(list);\nrefs.movieList.innerHTML = galeryMarkUp.join('');\n}   \n\nfunction loadOnePage(pageNumber, list) {\n  let listToDraw = [];\n\n  for(let i=(pageNumber - 1) * 20 ; i<pageNumber * 20; i+=1) {\n    if (i === list.length ) {\n      break;\n    }\n\n    listToDraw.push(list[i]);\n  }\n  loadMoviesList(listToDraw);\n}\n\nfunction loadMore(event) {\n  const currentPage = event.page;\n  loadOnePage(currentPage, movieList);\n}"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$734b9ce990a5e2e3$exports","URL","resolve","import","meta","url","toString","window","addEventListener","$dpZmf","onScroll","$krGWQ","default","watched","$f9e64c9db0cf690d$var$onClick","queued","toTopBtn","onToTopBtn","$f9e64c9db0cf690d$var$STORAGE_KEY","$f9e64c9db0cf690d$var$movieList","$f9e64c9db0cf690d$var$totalItems","$f9e64c9db0cf690d$var$totalPages","event","$jjYMT","pagination","off","$f9e64c9db0cf690d$var$loadMore","paginationBlock","classList","add","target","dataset","name","$hvBA4","load","remove","reset","currentPage","getCurrentPage","on","$f9e64c9db0cf690d$var$loadOnePage","$f9e64c9db0cf690d$var$loadMoviesList","list","movieList","innerHTML","$parcel$interopDefault","galeryMarkUp","$kkejX","createGalleryMarkup","join","pageNumber","listToDraw","push","page","buttonKey","Math","ceil","$f9e64c9db0cf690d$var$startPage"],"version":3,"file":"my-library.0af02daa.js.map"}