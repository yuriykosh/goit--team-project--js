var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},e.parcelRequired7c6=n);var r=n("7Y9D8"),a=n("cnvsZ");function o(e,{data:t}){return e.map((e=>{const{genre_ids:i,poster_path:n,release_date:r,title:a,vote_average:o,id:s}=e,l=`https://image.tmdb.org/t/p/w500/${n}`,c=r.slice(0,4),p=t.genres.filter((e=>i.includes(e.id))).map((e=>e.name));return`\n     <li class="movies__item" id=${s}>\n        <div class="movies__wrapper">\n        <img onerror="this.onerror=null;this.src='https://raw.githubusercontent.com/yuriykosh/goit--team-project--js/main/src/images/main-home/poster-filler-desktop.jpeg';"\n         alt="Titanic" src=${l} class="movies__poster" loading="lazy">\n        </div>\n        <div class="movies__meta">\n          <h2 class="movies__title">${a}</h2>\n          <div class="movies__desc">\n            <span class="movies__desc-genres">${p.length>2?[p[0],p[1],"Other"].join(", "):p.join(", ")}</span>|\n            <span class="movies__desc-release-year">${c}</span>\n            <span class="movies__vote is-hidden">${o.toFixed(1)}</span>\n          </div>\n        </div>\n      </li>`}))}var s=n("04jNI"),l=n("jjYMT");const c=document.querySelector(".movies"),p=document.querySelector(".js-form"),d=document.querySelector(".tui-pagination"),u=l.pagination.getCurrentPage(),g=document.querySelector(".player");async function f(e){const t=e.page;try{(0,s.spinnerStart)();const e=await a.ApiService.getMoviesByName(t),i=await a.ApiService.getGenresList(),{data:n}=e,{page:r,results:l,total_pages:p,total_results:d}=n,u=o(l,i).join("");c.innerHTML=u}catch(e){return d.classList.add("is-hidden"),console.log(error),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,s.spinnerStop)()}}async function v(e){const t=e.page;try{(0,s.spinnerStart)();const e=await a.ApiService.getTrendMovies(t),i=await a.ApiService.getGenresList(),{data:n}=e,{page:r,results:l,total_pages:p,total_results:d}=n,u=o(l,i).join("");c.innerHTML=u}catch(e){return d.classList.add("is-hidden"),console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,s.spinnerStop)()}}function m(e){const t=`<iframe id="player" type="text/html" width="640" height="360"\nsrc="http://www.youtube.com/embed/${e}?enablejsapi=1&origin=http://example.com"frameborder="0"></iframe>`;g.innerHTML=t}p.addEventListener("submit",(function(e){e.preventDefault();const t=e.currentTarget.elements.query.value.trim();if(!t)return r.Notify.failure("Please insert the name of the movie.");if(d.classList.add("is-hidden"),l.pagination.off("afterMove",v),l.pagination.off("afterMove",f),l.pagination.on("afterMove",f),a.ApiService.query=t,""===a.ApiService.query)return r.Notify.failure("Please insert the name of the movie.");p.reset(),c.innerHTML="",async function(){try{(0,s.spinnerStart)();const e=await a.ApiService.getMoviesByName(u),t=await a.ApiService.getGenresList(),{data:i}=e,{page:n,results:p,total_pages:g,total_results:f}=i;if(l.pagination.reset(f),0===p.length)return(0,s.spinnerStop)(),r.Notify.failure("Sorry, there are no movies matching your search query. Please try again.");0!==f&&r.Notify.success(`Hooray! We found ${f} movies.`);const v=o(p,t).join("");c.innerHTML=v,d.classList.remove("is-hidden")}catch(e){return console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,s.spinnerStop)()}}()})),r.Notify.init({width:"400px",clickToClose:!0}),async function(){try{(0,s.spinnerStart)();const e=await a.ApiService.getTrendMovies(u),t=await a.ApiService.getGenresList(),{data:i}=e,{page:n,results:p,total_pages:g,total_results:f}=i;if(l.pagination.reset(f),0===p.length)return(0,s.spinnerStop)(),r.Notify.failure("Trending movies are not available. Please insert the name of the movie.");const v=o(p,t).join("");c.innerHTML=v,d.classList.remove("is-hidden")}catch(e){return console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,s.spinnerStop)()}}(),l.pagination.on("afterMove",v),async function(e){try{const t=await a.ApiService.getMovieTreiler(e),{data:i}=t;console.log(i.results);const n=i.results.find((e=>"Trailer"===e.type&&e.official)).key;videoID=n,console.log(videoID),m(videoID)}catch(e){return console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}}(615777),m();
//# sourceMappingURL=index.3854a7fa.js.map
