{"mappings":"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","sources":["src/js/modal.js","src/js/player.js","src/js/modalBtnLogics.js"],"sourcesContent":["import { ApiService } from './ApiServise';\nimport { Notify } from 'notiflix';\nimport { spinnerStart, spinnerStop } from './spinner';\nimport findMovieTrailer from './player';\nimport onBtnClick from './modalBtnLogics';\n\nconst closeModalBtn = document.querySelector('[data-modal-close]');\nconst modal = document.querySelector('[data-modal]');\nconst movies = document.querySelector('.movies');\nconst wrapper = document.querySelector('.movie-modal');\n\n// const btnAddToWatched = document.querySelector('.btn_add_watched');\n// const btnAddToQueue = document.querySelector('.btn_add_queue');\n\nmovies.addEventListener('click', clickList);\n\nfunction clickModal(event) {\n  console.log('test');\n  if (\n    ((!event.target.closest('.movie-modal') ||\n      event.target.closest('[data-modal-close]')) &&\n      !event.keyCode) ||\n    event.keyCode === 27\n  ) {\n    closeModal();\n    document.removeEventListener('keydown', clickModal);\n    modal.removeEventListener('click', clickModal);\n  }\n}\n\nfunction closeModal() {\n  modal.classList.add('is-hidden');\n  document.body.style.overflow = 'visible';\n  wrapper.innerHTML =     `<div class=\"player\"></div>\n  <button data-modal-close class=\"movie-modal__close-btn\" type=\"button\">\n    <svg class=\"movie-modal__close-btn-icon\" width=\"30\" height=\"30\">\n      <use href=\"./images/symbol.svg#icon-close-btn-modal\"></use>\n    </svg>\n  </button>`;\n  modal.removeAttribute(\"id\")\n}\n\nfunction clickList(event) {\n  const moviesCard = event.target.closest('.movies__item');\n  if (moviesCard) {\n    modal.setAttribute('id', moviesCard.id);\n    // btnAddToWatched.setAttribute('data-id', moviesCard.id);\n    // btnAddToQueue.setAttribute('data-id', moviesCard.id);\n    openModal(moviesCard.id);\n  }\n}\n\nfunction openModal(id) {\n  modal.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n  fetchModalMarkup(id);\n  modal.addEventListener('click', clickModal);\n  document.addEventListener('keydown', clickModal);\n}\n\nasync function fetchModalMarkup(id) {\n  try {\n    spinnerStart();\n    const response = await ApiService.getMoviesById(id);\n    const { data } = response;\n    console.log(data);\n\n    const markUp = createModalMarkup(data);\n    wrapper.insertAdjacentHTML('beforeend', markUp);\n\n    const btnAddToWatched = document.querySelector('.btn_add_watched');\n    const btnAddToQueue = document.querySelector('.btn_add_queue');\n    btnAddToWatched.addEventListener('click', (event) => onBtnClick(event, 'WATCHED'));\nbtnAddToQueue.addEventListener('click', (event) => onBtnClick(event, 'QUEUE'));\nconst playBtn = document.querySelector('.js-playBtn');\nplayBtn.addEventListener('click', onPlayTrailer);\n  } catch (error) {\n    console.log(error);\n    return Notify.failure('Something went wrong. Please try again later.');\n  } finally {\n    spinnerStop();\n  }\n}\n\nfunction createModalMarkup(data) {\n\n  const defaultImage = `https://raw.githubusercontent.com/yuriykosh/goit--team-project--js/main/src/images/main-home/poster-filler-desktop.jpeg`;\n\n  const {genres, poster_path, title, vote_average, id, vote_count, popularity, original_title, overview} = data;\n\n  const posterLink = `https://image.tmdb.org/t/p/w500/${poster_path}`;\n  const genresList = genres.map(genre => genre.name);\n  const genresItems = genresList.length > 2 ? [genresList[0], genresList[1], 'Other'].join(', ') : genresList.join(', ');\n  const voteAverage = vote_average.toFixed(1);\n  const popul = popularity.toFixed(1);\n\n  return `<div class=\"movie-modal__wrapper\">\n    <div class=\"movie-modal__imgBox\">\n    <button class=\"movie-modal__video-btn js-playBtn\">\n      <svg class=\"movie-modal__play-btn\" width=\"80\" height=\"80\">\n        <use href=\"./images/symbol.svg#icon-play\"></use>\n      </svg>\n    </button>\n    <img class=\"movie-modal__imgBox__img\" src=${posterLink}\n      alt=${title} onerror=\"this.onerror=null;this.src='${defaultImage}';\"/>\n  </div>\n  <div>\n    <div>\n      <h2 class=\"movie-modal__title\">${title}</h2>\n      <ul class=\"movie-modal__info\">\n        <li class=\"movie-modal__info__item\">\n          <p class=\"movie-modal__info__item__attribute\">Vote / Votes</p>\n          <p class=\"movie-modal__info__item__value\">\n            <span class=\"movie-modal__info__item__value__marker\">${voteAverage}</span><span\n              class=\"movie-modal__info__item__value-slash\">/</span>\n            <span class=\"movie-modal__info__item__value__marker--grey\">${vote_count}</span>\n          </p>\n        </li>\n        <li class=\"movie-modal__info__item\">\n          <p class=\"movie-modal__info__item__attribute\">Popularity</p>\n          <p class=\"movie-modal__info__item__value\">${popul}</p>\n        </li>\n        <li class=\"movie-modal__info__item\">\n          <p class=\"movie-modal__info__item__attribute\">Original Title</p>\n          <p class=\"movie-modal__info__item__value\">${original_title}</p>\n        </li>\n        <li class=\"movie-modal__info__item\">\n          <p class=\"movie-modal__info__item__attribute\">Genre</p>\n          <p class=\"movie-modal__info__item__value\">${genresItems}</p>\n        </li>\n      </ul>\n    </div>\n    <div class=\"movie-modal__about\">\n      <h3 class=\"movie-modal__about-title\">About</h3>\n      <p class=\"movie-modal__desc\">\n        ${overview}\n      </p>\n    </div>\n    <div class=\"movie-modal__button\">\n      <button id=\"add-to-watched\" class=\"movie-modal__button__item btn_add_watched\" data-id=${id}>\n        add to watched\n      </button>\n      <button id=\"add-to-queue\" class=\"movie-modal__button__item btn_add_queue\" data-id=${id}>\n        add to queue\n      </button>\n    </div>\n  </div>\n</div>`\n}\n\nfunction onPlayTrailer(event) {\n  const moviesId = event.target.closest('[data-modal]').id;\n  findMovieTrailer(moviesId);\n}","import { ApiService } from './ApiServise';\nimport { Notify } from 'notiflix';\n\nconst player = document.querySelector('.player');\nconst modal = document.querySelector('[data-modal]');\n\nmodal.addEventListener('click', onClose);\n\nexport default async function findMovieTrailer(id) {\n    try {\n      const response = await ApiService.getMovieTreiler(id);\n      const { data } = response;\n  \n      const videoKey = data.results.find(\n        result => result.type === 'Trailer' && result.official\n      ).key;\n      videoID = videoKey;\n  \n      createPlayer(videoID);\n      \n      window.addEventListener('keydown', onEscPress)\n  \n    } catch (error) {\n      console.log(error);\n      return Notify.failure('Something went wrong. Please try again later.');\n    }\n  }\n  \n  function createPlayer (id) {\n    const frame = `<iframe class=\"player__frame\" id=\"player\" type=\"text/html\"\n    src=\"http://www.youtube.com/embed/${id}?enablejsapi=1&origin=http://example.com\"frameborder=\"0\"></iframe>`;\n    player.innerHTML = frame;\n  }\n\n  function onEscPress(e) {\n    if (e.key !== 'Escape') {\n      return\n    }\n    player.innerHTML = '';\n    window.removeEventListener('keydown', onEscPress)\n  }\n\n  function onClose(e) {\n    if (e.target !== player) {\n      player.innerHTML = '';\n    }\n  }\n","import { ApiService } from \"./ApiServise\";\n\n// const btnAddToWatched = document.querySelector('.btn_add_watched');\n// const btnAddToQueue = document.querySelector('.btn_add_queue');\n\n const onBtnClick = async function (event, storageKey) {\n    const movieId = event.target.dataset.id;\n    const response = await ApiService.getMoviesById(movieId);\n    const movieData = response.data;\n    console.log(movieData);\n    const arrMovie = [];\n\n    let queueMovie = JSON.parse(localStorage.getItem(storageKey));\n    if(!queueMovie){\n        queueMovie = [];\n    }\n\n    const tempMovie = queueMovie.find((movie) => {\n        return movie.id == movieData.id;\n    });\n    console.log(tempMovie)\n    if (tempMovie){\n        return;\n    };\n    \n    queueMovie.push(movieData);\n    \n    localStorage.setItem(storageKey, JSON.stringify(queueMovie));\n\n}; \n\n// btnAddToWatched.addEventListener('click', (event) => onBtnClick(event, 'WATCHED'));\n// btnAddToQueue.addEventListener('click', (event) => onBtnClick(event, 'QUEUE'));\n\nexport default onBtnClick;"],"names":["$bpxeT","parcelRequire","$51d3c906e753f86f$var$player","document","querySelector","id","$51d3c906e753f86f$var$_findMovieTrailer","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","data","videoKey","$2nBDz","ApiService","getMovieTreiler","_ctx","sent","results","find","result","type","official","key","videoID","$51d3c906e753f86f$var$createPlayer","window","addEventListener","$51d3c906e753f86f$var$onEscPress","console","log","t0","$6JpON","Notify","failure","frame","concat","innerHTML","e","removeEventListener","target","$8bafa3b920b38f0f$var$onBtnClick","event","storageKey","movieId","movieData","queueMovie","tempMovie","dataset","getMoviesById","JSON","parse","localStorage","getItem","movie","push","setItem","stringify","$8bafa3b920b38f0f$export$2e2bcd8739ae039","$40873ecf3c18e122$var$modal","$40873ecf3c18e122$var$movies","$40873ecf3c18e122$var$wrapper","$40873ecf3c18e122$var$clickModal","closest","keyCode","classList","add","body","style","overflow","removeAttribute","$40873ecf3c18e122$var$_fetchModalMarkup","markUp","btnAddToWatched","btnAddToQueue","$j1lrD","spinnerStart","$40873ecf3c18e122$var$createModalMarkup","insertAdjacentHTML","$40873ecf3c18e122$var$onPlayTrailer","spinnerStop","genres","poster_path","title","vote_average","vote_count","popularity","original_title","overview","posterLink","genresList","map","genre","name","genresItems","length","join","voteAverage","toFixed","popul","$51d3c906e753f86f$export$2e2bcd8739ae039","moviesCard","setAttribute","remove","$40873ecf3c18e122$var$fetchModalMarkup"],"version":3,"file":"index.fcd4dca8.js.map"}