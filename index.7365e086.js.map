{"mappings":"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","sources":["src/js/searchMovies.js","src/js/markUp.js","src/js/player.js"],"sourcesContent":["import { Notify } from 'notiflix';\nimport { ApiService } from './ApiServise';\nimport createMarkup from './markUp';\nimport { spinnerStart, spinnerStop } from './spinner';\nimport { pagination } from './tuiPagination';\nimport findMovieTrailer from './player';\nimport { onScroll, onToTopBtn } from \"./scroll-to-top\";\n\nconst gallery = document.querySelector('.movies');\nconst formEl = document.querySelector('.js-form');\nconst paginationBlock = document.querySelector('.tui-pagination')\nconst currentPage = pagination.getCurrentPage();\nconst toTopBtn = document.querySelector('.btn-to-top');\nconst playBtn = document.querySelector('.js-playBtn');\n\nformEl.addEventListener('submit', onFormSubmit);\nwindow.addEventListener('scroll', onScroll);\ntoTopBtn.addEventListener('click', onToTopBtn);\nplayBtn.addEventListener('click', onPlayTrailer);\n\nNotify.init({\n  width: '400px',\n  clickToClose: true,\n});\n\nfetchTrendMovies();\npagination.on('afterMove', loadMoreTrendingMovies);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  \n  const searchValue = e.currentTarget.elements.query.value.trim();\n\n  if (!searchValue) {\n    return Notify.failure('Please insert the name of the movie.');\n  }\n\n  paginationBlock.classList.add('is-hidden');\n  pagination.off('afterMove', loadMoreTrendingMovies);\n  pagination.off('afterMove', loadMoreSearchingPhotos);\n  pagination.on('afterMove', loadMoreSearchingPhotos);\n  ApiService.query = searchValue;\n\n  if (ApiService.query === '') {\n    return Notify.failure('Please insert the name of the movie.');\n  }\n\n  formEl.reset();\n  gallery.innerHTML = '';\n  fetchMovies();\n}\n\nasync function fetchMovies() {\n  try {\n    spinnerStart();\n    const response = await ApiService.getMoviesByName(currentPage);\n    const genresList = await ApiService.getGenresList();\n    const { data } = response;\n    const { page, results, total_pages, total_results } = data;\n\n    pagination.reset(total_results);\n\n    if (results.length === 0) {\n      spinnerStop();\n      return Notify.failure(\n        'Sorry, there are no movies matching your search query. Please try again.'\n      );\n    }\n\n    if (total_results !== 0) {\n      Notify.success(`Hooray! We found ${total_results} movies.`);\n    }\n\n    const markUp = createMarkup(results, genresList).join('');\n    gallery.innerHTML = markUp;\n    paginationBlock.classList.remove('is-hidden');\n  } catch (error) {\n    console.log(error);\n    return Notify.failure('Something went wrong. Please try again later.');\n  } finally {\n    spinnerStop();\n  }\n}\n\nasync function loadMoreSearchingPhotos(event) {\n  const currentPage = event.page;\n  try {\n    spinnerStart();\n    const response = await ApiService.getMoviesByName(currentPage);\n    const genresList = await ApiService.getGenresList();\n    const { data } = response;\n    const { page, results, total_pages, total_results } = data;\n    const markUp = createMarkup(results, genresList).join('');\n    gallery.innerHTML = markUp;\n  } catch (err) {\n    paginationBlock.classList.add('is-hidden');\n    console.log(error);\n    return Notify.failure('Something went wrong. Please try again later.');\n  } finally {\n    spinnerStop();\n  }\n}\n\nasync function fetchTrendMovies() {\n  try {\n    spinnerStart();\n    const response = await ApiService.getTrendMovies(currentPage);\n    const genresList = await ApiService.getGenresList();\n    const { data } = response;\n    const { page, results, total_pages, total_results } = data;\n\n    pagination.reset(total_results);     ///Почему отображается всего 50 страниц?\n    \n    if (results.length === 0) {\n      spinnerStop();\n      return Notify.failure(\n        'Trending movies are not available. Please insert the name of the movie.'\n      );\n    }\n\n    const markUp = createMarkup(results, genresList).join('');\n    gallery.innerHTML = markUp;\n    paginationBlock.classList.remove('is-hidden');\n  } catch (error) {\n    console.log(error);\n    return Notify.failure('Something went wrong. Please try again later.');\n  } finally {\n    spinnerStop();\n  }\n}\n\nasync function loadMoreTrendingMovies(event) {\n  const currentsPage = event.page;\n\n  try {\n    spinnerStart();\n    const response = await ApiService.getTrendMovies(currentsPage);\n    const genresList = await ApiService.getGenresList();\n    const { data } = response;\n    const { page, results, total_pages, total_results } = data;\n    const markUp = createMarkup(results, genresList).join('');\n    gallery.innerHTML = markUp;\n  } catch (err) {\n    paginationBlock.classList.add('is-hidden');\n    console.log(err);\n    return Notify.failure('Something went wrong. Please try again later.');\n  } finally {\n    spinnerStop();\n  }\n}\n\nfunction onPlayTrailer(event) {\n  const moviesId = event.target.closest('[data-modal]').id;\n  findMovieTrailer(moviesId);\n}","export default function createMarkup(results, { data }) {\n\n  const defaultImage = `https://raw.githubusercontent.com/yuriykosh/goit--team-project--js/main/src/images/main-home/poster-filler-desktop.jpeg`; ///////////\n\n    return results.map(result => {\n      const { genre_ids, poster_path, release_date, title, vote_average, id } = result;\n      const posterLink = `https://image.tmdb.org/t/p/w500/${poster_path}`;\n      const releaseYear = release_date.slice(0, 4);\n      const genresList = data.genres.filter(genre => genre_ids.includes(genre.id))\n      .map(item => item.name);\n      const genres = genresList.length > 2 ? [genresList[0], genresList[1], 'Other'].join(', ') : genresList.join(', ');\n      const voteAverage = vote_average.toFixed(1);\n\n     return `\n     <li class=\"movies__item\" id=${id}>\n        <div class=\"movies__wrapper\">\n        <img onerror=\"this.onerror=null;this.src='${defaultImage}';\"\n         alt=${title} src=${posterLink} class=\"movies__poster\" loading=\"lazy\">\n        </div>\n        <div class=\"movies__meta\">\n          <h2 class=\"movies__title\">${title}</h2>\n          <div class=\"movies__desc\">\n            <span class=\"movies__desc-genres\">${genres}</span>|\n            <span class=\"movies__desc-release-year\">${releaseYear}</span>\n            <span class=\"movies__vote is-hidden\">${voteAverage}</span>\n          </div>\n        </div>\n      </li>`;\n     })\n }     \n","import { ApiService } from './ApiServise';\nimport { Notify } from 'notiflix';\n\nconst player = document.querySelector('.player');\nconst modal = document.querySelector('[data-modal]');\n\nmodal.addEventListener('click', onClose);\n\nexport default async function findMovieTrailer(id) {\n    try {\n      const response = await ApiService.getMovieTreiler(id);\n      const { data } = response;\n  \n      const videoKey = data.results.find(\n        result => result.type === 'Trailer' && result.official\n      ).key;\n      videoID = videoKey;\n  \n      createPlayer(videoID);\n      \n      window.addEventListener('keydown', onEscPress)\n  \n    } catch (error) {\n      console.log(error);\n      return Notify.failure('Something went wrong. Please try again later.');\n    }\n  }\n  \n  function createPlayer (id) {\n    const frame = `<iframe class=\"player__frame\" id=\"player\" type=\"text/html\"\n    src=\"http://www.youtube.com/embed/${id}?enablejsapi=1&origin=http://example.com\"frameborder=\"0\"></iframe>`;\n    player.innerHTML = frame;\n  }\n\n  function onEscPress(e) {\n    if (e.key !== 'Escape') {\n      return\n    }\n    player.innerHTML = '';\n    window.removeEventListener('keydown', onEscPress)\n  }\n\n  function onClose(e) {\n    if (e.target !== player) {\n      player.innerHTML = '';\n    }\n  }\n"],"names":["$bpxeT","parcelRequire","$600243812f3c8d9b$export$2e2bcd8739ae039","results","param","data","map","result","genre_ids","poster_path","release_date","title","vote_average","id","posterLink","concat","releaseYear","slice","genresList","genres","filter","genre","includes","item","name","length","join","voteAverage","toFixed","$51d3c906e753f86f$var$player","document","querySelector","$51d3c906e753f86f$var$_findMovieTrailer","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","videoKey","$2nBDz","ApiService","getMovieTreiler","_ctx","sent","find","type","official","key","videoID","$51d3c906e753f86f$var$createPlayer","window","addEventListener","$51d3c906e753f86f$var$onEscPress","console","log","t0","$6JpON","Notify","failure","frame","innerHTML","e","removeEventListener","target","$e1a441075edf8b92$var$gallery","$e1a441075edf8b92$var$formEl","$e1a441075edf8b92$var$paginationBlock","$e1a441075edf8b92$var$currentPage","$5V9Cu","pagination","getCurrentPage","$e1a441075edf8b92$var$toTopBtn","$e1a441075edf8b92$var$playBtn","$e1a441075edf8b92$var$_fetchMovies","total_results","markUp","$j1lrD","spinnerStart","getMoviesByName","getGenresList","page","total_pages","reset","spinnerStop","success","classList","remove","$e1a441075edf8b92$var$loadMoreSearchingPhotos","event","$e1a441075edf8b92$var$_loadMoreSearchingPhotos","currentPage1","add","error","$e1a441075edf8b92$var$_fetchTrendMovies","getTrendMovies","$e1a441075edf8b92$var$loadMoreTrendingMovies","$e1a441075edf8b92$var$_loadMoreTrendingMovies","currentsPage","preventDefault","searchValue","currentTarget","elements","query","value","trim","off","on","$e1a441075edf8b92$var$fetchMovies","$8vL8o","onScroll","onToTopBtn","$51d3c906e753f86f$export$2e2bcd8739ae039","closest","init","width","clickToClose","$e1a441075edf8b92$var$fetchTrendMovies"],"version":3,"file":"index.7365e086.js.map"}