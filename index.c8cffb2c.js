var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,i.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequired7c6=i);var r=i("7Y9D8"),a=i("cnvsZ");function o(e,{data:t}){return e.map((e=>{const{genre_ids:n,poster_path:i,release_date:r,title:a,vote_average:o,id:s}=e,l=`https://image.tmdb.org/t/p/w500/${i}`,c=r.slice(0,4),d=t.genres.filter((e=>n.includes(e.id))).map((e=>e.name));return`\n     <li class="movies__item" id=${s}>\n        <div class="movies__wrapper">\n        <img onerror="this.onerror=null;this.src='https://raw.githubusercontent.com/yuriykosh/goit--team-project--js/main/src/images/main-home/poster-filler-desktop.jpeg';"\n         alt=${a} src=${l} class="movies__poster" loading="lazy">\n        </div>\n        <div class="movies__meta">\n          <h2 class="movies__title">${a}</h2>\n          <div class="movies__desc">\n            <span class="movies__desc-genres">${d.length>2?[d[0],d[1],"Other"].join(", "):d.join(", ")}</span>|\n            <span class="movies__desc-release-year">${c}</span>\n            <span class="movies__vote is-hidden">${o.toFixed(1)}</span>\n          </div>\n        </div>\n      </li>`}))}var s=i("04jNI"),l=i("jjYMT");a=i("cnvsZ"),r=i("7Y9D8");const c=document.querySelector(".player");async function d(e){try{const t=await a.ApiService.getMovieTreiler(e),{data:n}=t,i=n.results.find((e=>"Trailer"===e.type&&e.official)).key;videoID=i,function(e){const t=`<iframe class="player__frame" id="player" type="text/html"\n    src="http://www.youtube.com/embed/${e}?enablejsapi=1&origin=http://example.com"frameborder="0"></iframe>`;c.innerHTML=t}(videoID),window.addEventListener("keydown",p)}catch(e){return console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}}function p(e){"Escape"===e.key&&(c.innerHTML="",window.removeEventListener("keydown",p))}document.querySelector("[data-modal]").addEventListener("click",(function(e){e.target!==c&&(c.innerHTML="")}));var u=i("dpZmf");const f=document.querySelector(".movies"),g=document.querySelector(".js-form"),v=document.querySelector(".tui-pagination"),m=l.pagination.getCurrentPage(),y=document.querySelector(".btn-to-top"),h=document.querySelector(".js-playBtn");async function w(e){const t=e.page;try{(0,s.spinnerStart)();const e=await a.ApiService.getMoviesByName(t),n=await a.ApiService.getGenresList(),{data:i}=e,{page:r,results:l,total_pages:c,total_results:d}=i,p=o(l,n).join("");f.innerHTML=p}catch(e){return v.classList.add("is-hidden"),console.log(error),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,s.spinnerStop)()}}async function S(e){const t=e.page;try{(0,s.spinnerStart)();const e=await a.ApiService.getTrendMovies(t),n=await a.ApiService.getGenresList(),{data:i}=e,{page:r,results:l,total_pages:c,total_results:d}=i,p=o(l,n).join("");f.innerHTML=p}catch(e){return v.classList.add("is-hidden"),console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,s.spinnerStop)()}}g.addEventListener("submit",(function(e){e.preventDefault();const t=e.currentTarget.elements.query.value.trim();if(!t)return r.Notify.failure("Please insert the name of the movie.");if(v.classList.add("is-hidden"),l.pagination.off("afterMove",S),l.pagination.off("afterMove",w),l.pagination.on("afterMove",w),a.ApiService.query=t,""===a.ApiService.query)return r.Notify.failure("Please insert the name of the movie.");g.reset(),f.innerHTML="",async function(){try{(0,s.spinnerStart)();const e=await a.ApiService.getMoviesByName(m),t=await a.ApiService.getGenresList(),{data:n}=e,{page:i,results:c,total_pages:d,total_results:p}=n;if(l.pagination.reset(p),0===c.length)return(0,s.spinnerStop)(),r.Notify.failure("Sorry, there are no movies matching your search query. Please try again.");0!==p&&r.Notify.success(`Hooray! We found ${p} movies.`);const u=o(c,t).join("");f.innerHTML=u,v.classList.remove("is-hidden")}catch(e){return console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,s.spinnerStop)()}}()})),window.addEventListener("scroll",u.onScroll),y.addEventListener("click",u.onToTopBtn),h.addEventListener("click",(function(e){d(e.target.closest("[data-modal]").id)})),r.Notify.init({width:"400px",clickToClose:!0}),async function(){try{(0,s.spinnerStart)();const e=await a.ApiService.getTrendMovies(m),t=await a.ApiService.getGenresList(),{data:n}=e,{page:i,results:c,total_pages:d,total_results:p}=n;if(l.pagination.reset(p),0===c.length)return(0,s.spinnerStop)(),r.Notify.failure("Trending movies are not available. Please insert the name of the movie.");const u=o(c,t).join("");f.innerHTML=u,v.classList.remove("is-hidden")}catch(e){return console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,s.spinnerStop)()}}(),l.pagination.on("afterMove",S);
//# sourceMappingURL=index.c8cffb2c.js.map
