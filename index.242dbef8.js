var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,i.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequired7c6=i);var r=i("7Y9D8"),a=i("cnvsZ");function s(e,{data:t}){return e.map((e=>{const{genre_ids:n,poster_path:i,release_date:r,title:a,vote_average:s,id:o}=e,l=`https://image.tmdb.org/t/p/w500/${i}`,c=r.slice(0,4),p=t.genres.filter((e=>n.includes(e.id))).map((e=>e.name));return`\n     <li class="movies__item" id=${o}>\n        <div class="movies__wrapper">\n        <img onerror="this.onerror=null;this.src='https://raw.githubusercontent.com/yuriykosh/goit--team-project--js/main/src/images/main-home/poster-filler-desktop.jpeg';"\n         alt=${a} src=${l} class="movies__poster" loading="lazy">\n        </div>\n        <div class="movies__meta">\n          <h2 class="movies__title">${a}</h2>\n          <div class="movies__desc">\n            <span class="movies__desc-genres">${p.length>2?[p[0],p[1],"Other"].join(", "):p.join(", ")}</span>|\n            <span class="movies__desc-release-year">${c}</span>\n            <span class="movies__vote is-hidden">${s.toFixed(1)}</span>\n          </div>\n        </div>\n      </li>`}))}var o=i("04jNI"),l=i("jjYMT"),c=i("dpZmf");const p=document.querySelector(".movies"),d=document.querySelector(".js-form"),u=document.querySelector(".tui-pagination"),g=l.pagination.getCurrentPage(),f=document.querySelector(".btn-to-top");async function v(e){const t=e.page;try{(0,o.spinnerStart)();const e=await a.ApiService.getMoviesByName(t),n=await a.ApiService.getGenresList(),{data:i}=e,{page:r,results:l,total_pages:c,total_results:d}=i,u=s(l,n).join("");p.innerHTML=u}catch(e){return u.classList.add("is-hidden"),console.log(error),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,o.spinnerStop)()}}async function m(e){const t=e.page;try{(0,o.spinnerStart)();const e=await a.ApiService.getTrendMovies(t),n=await a.ApiService.getGenresList(),{data:i}=e,{page:r,results:l,total_pages:c,total_results:d}=i,u=s(l,n).join("");p.innerHTML=u}catch(e){return u.classList.add("is-hidden"),console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,o.spinnerStop)()}}d.addEventListener("submit",(function(e){e.preventDefault();const t=e.currentTarget.elements.query.value.trim();if(!t)return r.Notify.failure("Please insert the name of the movie.");if(u.classList.add("is-hidden"),l.pagination.off("afterMove",m),l.pagination.off("afterMove",v),l.pagination.on("afterMove",v),a.ApiService.query=t,""===a.ApiService.query)return r.Notify.failure("Please insert the name of the movie.");d.reset(),p.innerHTML="",async function(){try{(0,o.spinnerStart)();const e=await a.ApiService.getMoviesByName(g),t=await a.ApiService.getGenresList(),{data:n}=e,{page:i,results:c,total_pages:d,total_results:f}=n;if(l.pagination.reset(f),0===c.length)return(0,o.spinnerStop)(),r.Notify.failure("Sorry, there are no movies matching your search query. Please try again.");0!==f&&r.Notify.success(`Hooray! We found ${f} movies.`);const v=s(c,t).join("");p.innerHTML=v,u.classList.remove("is-hidden")}catch(e){return console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,o.spinnerStop)()}}()})),window.addEventListener("scroll",c.onScroll),f.addEventListener("click",c.onToTopBtn),r.Notify.init({width:"400px",clickToClose:!0}),async function(){try{(0,o.spinnerStart)();const e=await a.ApiService.getTrendMovies(g),t=await a.ApiService.getGenresList(),{data:n}=e,{page:i,results:c,total_pages:d,total_results:f}=n;if(l.pagination.reset(f),0===c.length)return(0,o.spinnerStop)(),r.Notify.failure("Trending movies are not available. Please insert the name of the movie.");const v=s(c,t).join("");p.innerHTML=v,u.classList.remove("is-hidden")}catch(e){return console.log(e),r.Notify.failure("Something went wrong. Please try again later.")}finally{(0,o.spinnerStop)()}}(),l.pagination.on("afterMove",m);
//# sourceMappingURL=index.242dbef8.js.map
